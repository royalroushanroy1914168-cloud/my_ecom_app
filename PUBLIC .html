<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>INDIASHOP — Customer App (Demo)</title>
  <style>
    :root{--accent:#2874f0;--muted:#666;--bg:#f6f7fb;--card:#fff}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Arial,sans-serif;margin:0;background:var(--bg);color:#111}
    header{background:var(--accent);color:#fff;padding:12px 16px;display:flex;align-items:center;gap:12px}
    .logo{font-weight:800}
    .search{flex:1}
    .search input{width:100%;padding:8px 12px;border-radius:8px;border:0}
    .actions{display:flex;gap:8px;align-items:center}
    .btn{background:#fff;color:var(--accent);padding:8px 12px;border-radius:8px;border:0;cursor:pointer}
    .badge{background:#ff3b30;color:#fff;border-radius:999px;padding:4px 8px;font-size:13px}

    main{padding:16px}
    .banners{display:flex;gap:12px;overflow:auto;margin-bottom:12px}
    .banner{min-width:320px;background:linear-gradient(90deg,#fff,#eaf2ff);padding:18px;border-radius:10px}
    .categories{display:flex;gap:12px;overflow:auto;margin-bottom:12px}
    .category{min-width:120px;background:var(--card);padding:8px;border-radius:8px;text-align:center;box-shadow:0 6px 12px rgba(0,0,0,0.04)}

    .layout{display:grid;grid-template-columns:240px 1fr;gap:12px}
    .filters{background:var(--card);padding:12px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.04)}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:14px}
    .card{background:var(--card);padding:12px;border-radius:10px;box-shadow:0 8px 18px rgba(0,0,0,0.04);display:flex;flex-direction:column}
    .card img{width:100%;height:160px;object-fit:contain}
    .card h4{margin:8px 0 4px;font-size:15px}
    .price{color:var(--accent);font-weight:700}
    .meta{flex:1}

    /* modals */
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,0.4);display:none;align-items:center;justify-content:center;padding:12px}
    .overlay.open{display:flex}
    .modal{width:840px;max-width:100%;background:#fff;border-radius:10px;padding:16px;max-height:90vh;overflow:auto}
    .small{font-size:13px;color:var(--muted)}

    footer{padding:12px;text-align:center;color:var(--muted)}
    @media (max-width:900px){.layout{grid-template-columns:1fr}.filters{order:2}}
  </style>
</head>
<body>
  <header>
    <div class="logo">INDIASHOP</div>
    <div class="search"><input id="search" placeholder="Search products, brands..." /></div>
    <div class="actions">
      <button class="btn" id="loginBtn">Login / Signup</button>
      <button class="btn" id="wishlistBtn">Wishlist <span id="wishCount" class="badge">0</span></button>
      <button class="btn" id="cartBtn">Cart <span id="cartCount" class="badge">0</span></button>
    </div>
  </header>

  <main>
    <div class="banners">
      <div class="banner"><h2>Big Deals Today</h2><div class="small">Up to 50% off on mobiles</div></div>
      <div class="banner"><h2>Fashion Picks</h2><div class="small">Buy 1 Get 1</div></div>
    </div>

    <div class="categories" id="categoryList">
      <!-- categories inserted here -->
    </div>

    <div class="layout">
      <aside class="filters">
        <h3>Filters</h3>
        <div>
          <label class="small">Category</label>
          <select id="filterCategory"><option value="">All</option></select>
        </div>
        <div style="margin-top:8px">
          <label class="small">Price</label>
          <div><input type="range" id="priceRange" min="0" max="30000" step="100" value="30000" /></div>
          <div class="small">Max: ₹<span id="maxPrice">30000</span></div>
        </div>
        <div style="margin-top:8px"><label class="small">Sort</label><select id="sortBy"><option value="popular">Popular</option><option value="low">Price: Low to High</option><option value="high">Price: High to Low</option></select></div>
      </aside>

      <section>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
          <h2>Products</h2>
          <div class="small" id="resultsInfo"></div>
        </div>
        <div class="grid" id="productGrid"></div>
      </section>
    </div>
  </main>

  <footer>INDIASHOP demo • Mock checkout & login • Use on GitHub Pages</footer>

  <!-- Modals: login, product, cart, checkout, orders -->
  <div id="loginOverlay" class="overlay" role="dialog" aria-hidden="true">
    <div class="modal">
      <h3>Login / Signup</h3>
      <div style="display:flex;gap:12px;flex-wrap:wrap">
        <div style="flex:1;min-width:260px">
          <label class="small">Email</label>
          <input id="loginEmail" type="email" />
          <button class="btn" id="emailLoginBtn" style="margin-top:8px">Send OTP (Mock)</button>
        </div>
        <div style="flex:1;min-width:260px">
          <label class="small">Phone</label>
          <input id="loginPhone" type="text" placeholder="+91xxxxxxxxxx" />
          <button class="btn" id="phoneLoginBtn" style="margin-top:8px">Send OTP (Mock)</button>
        </div>
      </div>
      <div style="margin-top:12px">
        <label class="small">Enter OTP</label>
        <input id="otpInput" type="text" /> <button class="btn" id="verifyOtp">Verify</button>
        <div class="small" id="loginStatus">OTP not sent</div>
      </div>
      <div style="margin-top:12px"><button class="btn" id="closeLogin">Close</button></div>
    </div>
  </div>

  <div id="productOverlay" class="overlay"><div class="modal" id="productModal"></div></div>
  <div id="cartOverlay" class="overlay"><div class="modal" id="cartModal"></div></div>
  <div id="checkoutOverlay" class="overlay"><div class="modal" id="checkoutModal"></div></div>
  <div id="ordersOverlay" class="overlay"><div class="modal" id="ordersModal"></div></div>

  <script>
    // --- Sample data ---
    const PRODUCTS = [
      {id:1,title:'Smartphone Model A',price:12999,cat:'Mobiles',img:'https://via.placeholder.com/300?text=Phone+A',rating:4.2,reviews:[{user:'Anita',text:'Good phone',stars:4}]},
      {id:2,title:'Running Shoes',price:3499,cat:'Fashion',img:'https://via.placeholder.com/300?text=Shoes',rating:4.5,reviews:[{user:'Rohan',text:'Comfortable',stars:5}]},
      {id:3,title:'Casual Shirt',price:799,cat:'Fashion',img:'https://via.placeholder.com/300?text=Shirt',rating:4.1,reviews:[]},
      {id:4,title:'Wireless Earbuds',price:1999,cat:'Electronics',img:'https://via.placeholder.com/300?text=Earbuds',rating:4.0,reviews:[]},
      {id:5,title:'Smartwatch',price:4999,cat:'Electronics',img:'https://via.placeholder.com/300?text=Watch',rating:4.3,reviews:[]},
      {id:6,title:'Backpack',price:1199,cat:'Home',img:'https://via.placeholder.com/300?text=Backpack',rating:4.0,reviews:[]}
    ];

    // --- Storage keys ---
    const KEY_CART='indiashop_cart_v1', KEY_WISH='indiashop_wish_v1', KEY_ORD='indiashop_orders_v1', KEY_USERS='indiashop_users_v1', KEY_SESSION='indiashop_session_v1';

    // --- Helpers ---
    const read=(k)=> JSON.parse(localStorage.getItem(k) || '[]');
    const write=(k,v)=> localStorage.setItem(k,JSON.stringify(v));
    const session = ()=> JSON.parse(localStorage.getItem(KEY_SESSION) || 'null');
    const setSession = s => localStorage.setItem(KEY_SESSION, JSON.stringify(s));

    // --- Render categories & filters ---
    const cats = Array.from(new Set(PRODUCTS.map(p=>p.cat)));
    const catList = document.getElementById('categoryList'); const filterCat = document.getElementById('filterCategory');
    cats.forEach(c=>{ const el=document.createElement('div'); el.className='category'; el.innerHTML=`<img src='https://via.placeholder.com/72?text=${encodeURIComponent(c)}' alt='${c}'/><div>${c}</div>`; el.addEventListener('click', ()=>{ document.getElementById('search').value=''; filterCat.value=c; applyFilters(); }); catList.appendChild(el); const opt=document.createElement('option'); opt.value=c; opt.textContent=c; filterCat.appendChild(opt); });

    // --- Product grid ---
    const productGrid = document.getElementById('productGrid'); const resultsInfo = document.getElementById('resultsInfo');
    function mkCard(p){ const el=document.createElement('div'); el.className='card'; el.innerHTML=`<img src='${p.img}' alt='${p.title}'/><div class='meta'><h4>${p.title}</h4><div class='small'>${p.cat}</div><div class='price'>₹${p.price.toLocaleString()}</div></div><div style='display:flex;gap:8px;margin-top:8px'><button class='btn' data-act='view' data-id='${p.id}'>View</button><button class='btn' data-act='add' data-id='${p.id}'>Add</button><button class='btn' data-act='wish' data-id='${p.id}'>❤</button></div>`; return el; }
    function renderProducts(list){ productGrid.innerHTML=''; list.forEach(p=> productGrid.appendChild(mkCard(p))); resultsInfo.textContent = list.length + ' results'; }

    // --- Filters/search/sort ---
    document.getElementById('search').addEventListener('input', applyFilters);
    filterCat.addEventListener('change', applyFilters);
    document.getElementById('priceRange').addEventListener('input', (e)=>{ document.getElementById('maxPrice').textContent = e.target.value; applyFilters(); });
    document.getElementById('sortBy').addEventListener('change', applyFilters);

    function applyFilters(){ const q=document.getElementById('search').value.trim().toLowerCase(); const c=filterCat.value; const max=Number(document.getElementById('priceRange').value); let list = PRODUCTS.filter(p=> p.price<=max);
      if(c) list = list.filter(p=>p.cat===c);
      if(q) list = list.filter(p=> p.title.toLowerCase().includes(q) || p.cat.toLowerCase().includes(q));
      const sort=document.getElementById('sortBy').value; if(sort==='low') list.sort((a,b)=>a.price-b.price); if(sort==='high') list.sort((a,b)=>b.price-a.price);
      renderProducts(list);
    }

    // --- Product view modal ---
    document.addEventListener('click', (e)=>{
      const b=e.target; if(b.dataset && b.dataset.act){ const id=Number(b.dataset.id); if(b.dataset.act==='view') showProduct(id); if(b.dataset.act==='add') addToCart(id); if(b.dataset.act==='wish') toggleWish(id); }
      if(e.target.id==='cartBtn' || e.target.closest && e.target.closest('#cartBtn')) showCart();
      if(e.target.id==='wishlistBtn') showWishlist();
    });

    function showProduct(id){ const p = PRODUCTS.find(x=>x.id===id); const modal=document.getElementById('productModal'); modal.innerHTML = `<div style='display:flex;gap:12px'><div style='flex:1'><img src='${p.img}' style='width:100%;height:320px;object-fit:contain'/></div><div style='flex:1'><h2>${p.title}</h2><div class='small'>${p.cat}</div><div class='price'>₹${p.price}</div><div style='margin-top:8px'><button class='btn' id='viewAdd' data-id='${p.id}'>Add to cart</button> <button class='btn' id='viewWish' data-id='${p.id}'>Wishlist</button></div><div style='margin-top:12px'><h4>Reviews</h4><div id='reviews'>${p.reviews.map(r=>`<div class=\"small\"><strong>${r.user}:</strong> ${r.text} (${r.stars}★)</div>`).join('')}</div><div style="margin-top:8px"><textarea id='reviewText' placeholder='Write a review' style='width:100%;min-height:60px'></textarea><div style='margin-top:6px'><select id='reviewStars'><option value='5'>5</option><option value='4'>4</option><option value='3'>3</option><option value='2'>2</option><option value='1'>1</option></select> <button class='btn' id='postReview' data-id='${p.id}'>Post Review</button></div></div></div></div>`; openOverlay('productOverlay');
    }

    // --- Cart & Wishlist ---
    function getCart(){ return read(KEY_CART); }
    function setCart(c){ write(KEY_CART,c); updateCounts(); }
    function addToCart(id){ const cart = getCart(); const item = cart.find(x=>x.id===id); if(item) item.qty++; else cart.push({id,qty:1}); setCart(cart); toast('Added to cart'); }
    function updateCounts(){ document.getElementById('cartCount').textContent = getCart().reduce((s,i)=>s+i.qty,0); document.getElementById('wishCount').textContent = read(KEY_WISH).length; }

    function toggleWish(id){ let w = read(KEY_WISH); if(w.includes(id)){ w = w.filter(x=>x!==id); toast('Removed from wishlist'); } else { w.push(id); toast('Added to wishlist'); } write(KEY_WISH,w); updateCounts(); }

    // --- Show cart modal ---
    function showCart(){ const cart = getCart(); const modal=document.getElementById('cartModal'); if(cart.length===0){ modal.innerHTML='<h3>Your cart is empty</h3><div class="small">Add products to cart</div><div style="margin-top:12px"><button class="btn" id="closeCart">Close</button></div>'; openOverlay('cartOverlay'); return; }
      let html='<h3>Your Cart</h3><div style="max-height:60vh;overflow:auto">'; let total=0; cart.forEach(it=>{ const p=PRODUCTS.find(x=>x.id===it.id); const sub=p.price*it.qty; total+=sub; html+=`<div style="display:flex;gap:12px;padding:8px 0;border-bottom:1px solid #eee"><img src='${p.img}' style='width:80px;height:80px;object-fit:contain'/><div style='flex:1'><div><strong>${p.title}</strong></div><div class='small'>₹${p.price} x ${it.qty} = ₹${sub}</div><div style='margin-top:8px'><button class='btn' data-act='dec' data-id='${p.id}' >-</button> <button class='btn' data-act='inc' data-id='${p.id}'>+</button> <button class='btn' data-act='rm' data-id='${p.id}'>Remove</button></div></div></div>`; }); html+=`</div><div style='text-align:right;margin-top:12px'><strong>Total: ₹${total}</strong></div><div style='margin-top:12px;display:flex;gap:8px;justify-content:flex-end'><button class='btn' id='checkoutBtnTop'>Checkout</button><button class='btn' id='closeCart'>Close</button></div>`; modal.innerHTML=html; openOverlay('cartOverlay'); }

    document.addEventListener('click', (e)=>{
      const b=e.target;
      if(b.id==='closeCart' || b.id==='closeWishlist' || b.id==='closeOrders' || b.id==='closeLogin') closeAll();
      if(b.id==='checkoutBtnTop') openCheckout();
      if(b.id==='viewAdd') addToCart(Number(b.dataset.id));
      if(b.id==='viewWish') toggleWish(Number(b.dataset.id));
      if(b.dataset && b.dataset.act){ const act=b.dataset.act; const id=Number(b.dataset.id); if(act==='inc' || act==='dec' || act==='rm'){ cartAdjust(id,act); showCart(); } }
      if(b.id==='postReview'){ postReview(Number(b.dataset.id)); }
    });

    function cartAdjust(id,act){ let c=getCart(); const it=c.find(x=>x.id===id); if(!it) return; if(act==='inc') it.qty++; if(act==='dec'){ it.qty = Math.max(1, it.qty-1);} if(act==='rm') c = c.filter(x=>x.id!==id); setCart(c); }

    // --- Wishlist view ---
    function showWishlist(){ const w=read(KEY_WISH); const modal=document.getElementById('cartModal'); if(w.length===0){ modal.innerHTML='<h3>Wishlist empty</h3><div class="small">Add items to wishlist</div><div style="margin-top:12px"><button class="btn" id="closeWishlist">Close</button></div>'; openOverlay('cartOverlay'); return; } let html='<h3>Your Wishlist</h3><div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px">'; w.forEach(id=>{ const p=PRODUCTS.find(x=>x.id===id); html+=`<div class='card'><img src='${p.img}'/><div class='meta'><h4>${p.title}</h4><div class='price'>₹${p.price}</div></div><div style='display:flex;gap:8px;margin-top:8px'><button class='btn' data-act='add' data-id='${p.id}'>Add to cart</button><button class='btn' data-act='wish' data-id='${p.id}'>Remove</button></div></div>`; }); html+='</div><div style="margin-top:12px;text-align:right"><button class="btn" id="closeWishlist">Close</button></div>'; modal.innerHTML=html; openOverlay('cartOverlay'); }

    // --- Checkout (mock) ---
    function openCheckout(){ const modal=document.getElementById('checkoutModal'); const cart=getCart(); if(cart.length===0){ alert('Cart is empty'); return; } let total=0; cart.forEach(it=>{ const p=PRODUCTS.find(x=>x.id===it.id); total+=p.price*it.qty; }); modal.innerHTML=`<h3>Checkout</h3><div class='small'>Total: ₹${total}</div><div style='margin-top:8px'><label class='small'>Name</label><input id='payName' type='text' placeholder='Full name'/><label class='small'>Address</label><textarea id='payAddress'></textarea></div><div style='margin-top:12px;display:flex;gap:8px;justify-content:flex-end'><button class='btn' id='payNow'>Pay (Mock)</button> <button class='btn' id='closeCheckout'>Close</button></div>`; openOverlay('checkoutOverlay'); }

    document.addEventListener('click', (e)=>{ if(e.target.id==='payNow'){ processPayment(); } if(e.target.id==='closeCheckout') closeAll(); });

    function processPayment(){ const name=document.getElementById('payName').value.trim(); const addr=document.getElementById('payAddress').value.trim(); if(!name||!addr){ alert('Enter name & address'); return; } const cart = getCart(); let orders = read(KEY_ORD); const orderId = 'ORD'+Date.now(); let total=0; cart.forEach(it=>{ const p=PRODUCTS.find(x=>x.id===it.id); total+=p.price*it.qty; }); orders.unshift({id:orderId,items:cart,total,addr,name,status:'Processing',date:new Date().toISOString()}); write(KEY_ORD,orders); setCart([]); updateCounts(); closeAll(); toast('Payment success — order placed: '+orderId); }

    // --- Orders & Tracking ---
    function showOrders(){ const orders = read(KEY_ORD); const modal=document.getElementById('ordersModal'); if(orders.length===0){ modal.innerHTML='<h3>No orders yet</h3><div class="small">Your recent orders will appear here</div><div style="margin-top:12px"><button class="btn" id="closeOrders">Close</button></div>'; openOverlay('ordersOverlay'); return; } let html='<h3>Your Orders</h3><div style="max-height:70vh;overflow:auto">'; orders.forEach(o=>{ html+=`<div style='padding:8px 0;border-bottom:1px solid #eee'><div><strong>${o.id}</strong> • ${new Date(o.date).toLocaleString()}</div><div class='small'>Status: ${o.status}</div><div class='small'>Total: ₹${o.total}</div><div style='margin-top:6px'><button class='btn' data-act='track' data-id='${o.id}'>Track</button></div></div>`; }); html+='</div><div style="margin-top:12px;text-align:right"><button class="btn" id="closeOrders">Close</button></div>'; modal.innerHTML=html; openOverlay('ordersOverlay'); }

    document.addEventListener('click', (e)=>{ if(e.target.dataset && e.target.dataset.act==='track'){ trackOrder(e.target.dataset.id); } });
    function trackOrder(id){ const orders = read(KEY_ORD); const o = orders.find(x=>x.id===id); if(!o) return; alert('Order '+id+' status: '+o.status+'\n(Tracking is a mock here)'); }

    // --- Reviews ---
    function postReview(id){ const text=document.getElementById('reviewText').value.trim(); const stars=Number(document.getElementById('reviewStars').value); if(!text){ alert('Write a review'); return; } const p=PRODUCTS.find(x=>x.id===id); p.reviews.push({user:(session() && session().name) || 'Guest', text, stars}); toast('Review posted'); showProduct(id); }

    // --- Login / OTP Mock ---
    let lastOtp=null; function sendOtp(dest){ lastOtp = ''+ (Math.floor(Math.random()*900000)+100000); localStorage.setItem('mock_otp',lastOtp); document.getElementById('loginStatus').textContent = 'OTP sent: '+lastOtp+' (mock)'; toast('OTP sent (mock)'); }
    document.getElementById('emailLoginBtn').addEventListener('click', ()=>{ const e=document.getElementById('loginEmail').value.trim(); if(!e){ alert('Enter email'); return; } sendOtp(e); });
    document.getElementById('phoneLoginBtn').addEventListener('click', ()=>{ const p=document.getElementById('loginPhone').value.trim(); if(!p){ alert('Enter phone'); return; } sendOtp(p); });
    document.getElementById('verifyOtp').addEventListener('click', ()=>{ const val=document.getElementById('otpInput').value.trim(); const mock = localStorage.getItem('mock_otp'); if(val && mock && val===mock){ // create session
        const user = {id:Date.now(), name:'User', email:document.getElementById('loginEmail').value||'', phone:document.getElementById('loginPhone').value||''}; let users = read(KEY_USERS); users.push(user); write(KEY_USERS,users); setSession(user); document.getElementById('loginStatus').textContent='Verified — logged in'; closeAll(); toast('Logged in as '+user.email||user.phone); } else { alert('Invalid OTP (check mock)'); } });

    // --- UI helpers ---
    function openOverlay(id){ document.getElementById(id).classList.add('open'); }
    function closeAll(){ document.querySelectorAll('.overlay').forEach(o=>o.classList.remove('open')); }

    document.getElementById('loginBtn').addEventListener('click', ()=> openOverlay('loginOverlay'));
    document.getElementById('cartBtn').addEventListener('click', ()=> showCart());
    document.getElementById('wishlistBtn').addEventListener('click', ()=> showWishlist());

    // --- Toast ---
    function toast(t){ const el=document.createElement('div'); el.textContent=t; el.style.position='fixed'; el.style.right='16px'; el.style.bottom='16px'; el.style.background='#111'; el.style.color='#fff'; el.style.padding='8px 12px'; el.style.borderRadius='8px'; document.body.appendChild(el); setTimeout(()=>el.remove(),1200); }

    // --- Init ---
    (function init(){ // seed storage
      if(!localStorage.getItem(KEY_CART)) write(KEY_CART,[]);
      if(!localStorage.getItem(KEY_WISH)) write(KEY_WISH,[]);
      if(!localStorage.getItem(KEY_ORD)) write(KEY_ORD,[]);
      renderProducts(PRODUCTS); updateCounts(); })();
  </script>
</body>
</html>

