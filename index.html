<!-- public/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Flipkart-Clone</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="navbar">
    <div class="logo">Flipkart Clone</div>
    <div class="nav-actions">
      <input id="search" placeholder="Search products..." />
      <button id="btn-search">Search</button>
      <a href="products.html">Products</a>
      <a href="cart.html" target="_blank">Cart (<span id="cart-count">0</span>)</a>
      <span id="user-area"></span>
    </div>
  </header>

  <main class="container">
    <h1>Welcome to Flipkart Clone</h1>
    <p>Simple full-stack demo — browse products, add to cart, login, checkout.</p>

    <section id="featured">
      <h2>Featured Products</h2>
      <div id="featured-list" class="product-grid"></div>
    </section>
  </main>

  <script src="app.js"></script>
  <script>
    // show featured products
    fetch('/api/products?limit=4')
      .then(r=>r.json())
      .then(data => {
        const el = document.getElementById('featured-list');
        el.innerHTML = '';
        data.slice(0,4).forEach(p=>{
          const d = document.createElement('div');
          d.className = 'product-card';
          d.innerHTML = `
            <img src="${p.image}" alt="${p.title}" />
            <h3>${p.title}</h3>
            <p>₹${p.price}</p>
            <p>${p.category}</p>
            <button onclick="openProduct(${p.id})">View</button>
            <button onclick="addToLocalCart(${p.id}, '${p.title}', ${p.price})">Add to Cart</button>
          `;
          el.appendChild(d);
        });
      });

    document.getElementById('btn-search').addEventListener('click', ()=>{
      const q = document.getElementById('search').value.trim();
      localStorage.setItem('lastSearch', q);
      window.location.href = 'products.html?q='+encodeURIComponent(q);
    });
  </script>
</body>
</html>

